
## 

在国际上，桌面虚拟化市场厂商主要有 Citrix（思杰，占46%市场份额）、Vmware（占18%）、微软、Dell。

桌面虚拟化的核心技术是桌面传输协议，即用于服务器与终端之间传输图形、音频、视频、输入信息设备、外设的通信协议。当前主流的桌面传输协议共有四种，都是基于TCP或UDP协议：

1. ICA：ICA协议属于Citrix，它的英文全称是Independent Computing Architecture。

Citrix在1989年成立时，就一直拥有这个当前仍然保密的协议。可以想象，当Linux和Java语言还没有出世时，Citrix就开始开发虚拟化软件，ICA的稳定可靠性确有其因。ICA协议是基于TCP/IP，与平台无关（Windows、Linux甚至是DOS都可运行），共定义了32个虚拟通道（虚拟通道可以简单理解为缓存，类似于USB的端点），其中16个是系统通道，用于传输视频、音频、剪贴板、磁盘、打印和外设，还有16个客户自定义通道，像我们有的高拍仪等外设产品就可以用这些通道。ICA***的特点是远程图像传输采用的是矢量数据处理方式，即把图形数据分为位图、文字、图形命令，再通过压缩算法传输至终端，再渲染显示，因此ICA对于带宽会相对较低。


1. PCoIP：PCoIP是Vmware的。

事实上这个协议并不是Vmware的，而是Vmware在2009年从一家小公司Teradici租用过来的，该协议原本只是为硬件图形加速而设计。PCoIP采用的是UDP协议，但由于传输的是位图数据，体验仍然不如基于TCP协议的ICA，甚至它也不支持外设重定向。Vmware告诉客户的做法是，如果发现使用PCoIP不能使用的功能，请切换成RDP。为了摆脱这种尴尬的局部，Vmware正在研发自己的Blast协议。


1. RDP：RDP英方全称是Remote Desktop Protocol 。

是微软公司操作系统标配的软件，RDP传输的也是位图数据，只是经过压缩，因此也需要较大的带宽。微软本来有能力把RDP做得相关完善，但微软一直不待见RDP。从RDP协议7版本之后，微软终于实现了RemoteFx技术，不仅实现了USB设备映射，也实现多媒体播放重定向（说白了，就是把码流压缩了，传到终端上，然后用终端的CPU来解码播放）。微软看到vmware和citrix的势头，开始行动了，结果一下子在服务器虚拟化的魔鬼象限中就排名第2了。


1. SPICE：是一个开源协议，英文全称是Simple Protocol for Independent Computing Environment。

该协议是Redhat（红帽）公司研发的。该协议来源是由 Qumranet 公司开发的一款开源网络协议。它是基于TCP/IP协议，能根据终端的性能来决定是像ICA一样发送图形命令，还是像PCoIP一样由服务器主机处理图像。但该协议性能较差，也必须用 KVM 作为核心基础组件。该协议在四大协议中，性能应该是最差的一个。



## 目前状况

华为HDP协议其实是基于ICA的定制，因为华为Fusion Access的核心虚拟化控制器组件仍然采用的是Citrix的

那国内很多桌面虚拟化小厂商呢？要么是服务器基于KVM，直接采用SPICE协议，要么就是服务器基于Zen，直接拿微软RDP协议，也有用VNC的
