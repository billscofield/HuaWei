# centos7

```
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.8' not found (required by ./katanaBin)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by ./katanaBin)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by ./katanaBin)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by ./katanaBin)
./katanaBin: /lib64/libQt5Core.so.5: version `Qt_5.15' not found (required by ./katanaBin)
./katanaBin: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by ./katanaBin)
./katanaBin: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by ./katanaBin)
./katanaBin: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /opt/liujiao/katana/bin/libfoundryboost_filesystem.so.1.80.0)
./katanaBin: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /opt/liujiao/katana/bin/libfoundryboost_filesystem.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by /opt/liujiao/katana/bin/libfoundryboost_filesystem.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.8' not found (required by /opt/liujiao/katana/bin/libfoundryboost_filesystem.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libfoundryboost_filesystem.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /opt/liujiao/katana/bin/libfoundryboost_filesystem.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by /opt/liujiao/katana/bin/libfoundryboost_program_options.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libfoundryboost_program_options.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.8' not found (required by /opt/liujiao/katana/bin/libfoundryboost_program_options.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /opt/liujiao/katana/bin/libfoundryboost_program_options.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libfoundryboost_python310.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.8' not found (required by /opt/liujiao/katana/bin/libfoundryboost_python310.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /opt/liujiao/katana/bin/libfoundryboost_python310.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by /opt/liujiao/katana/bin/libFnGeolib3.so)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libFnGeolib3.so)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /opt/liujiao/katana/bin/libFnGeolib3.so)
./katanaBin: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /opt/liujiao/katana/bin/libFnGeolib3.so)
./katanaBin: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by /opt/liujiao/katana/bin/python3.10/lib/libpython3.10.so.1.0)
./katanaBin: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /opt/liujiao/katana/bin/python3.10/lib/libpython3.10.so.1.0)
./katanaBin: /lib64/libc.so.6: version `GLIBC_2.26' not found (required by /opt/liujiao/katana/bin/python3.10/lib/libpython3.10.so.1.0)
./katanaBin: /lib64/libc.so.6: version `GLIBC_2.27' not found (required by /opt/liujiao/katana/bin/python3.10/lib/libpython3.10.so.1.0)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.8' not found (required by /opt/liujiao/katana/bin/libFnConfiguration.so)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libFnConfiguration.so)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /opt/liujiao/katana/bin/libFnConfiguration.so)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by /opt/liujiao/katana/bin/libFnLoggingHost.so)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libFnLoggingHost.so)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.8' not found (required by /opt/liujiao/katana/bin/libFnLoggingHost.so)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /opt/liujiao/katana/bin/libFnLoggingHost.so)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.8' not found (required by /opt/liujiao/katana/bin/libFnPluginSystem.so)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libFnPluginSystem.so)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by /opt/liujiao/katana/bin/libFnPluginSystem.so)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /opt/liujiao/katana/bin/libFnPluginSystem.so)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.8' not found (required by /opt/liujiao/katana/bin/libFnGeolibSDK.so)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libFnGeolibSDK.so)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by /opt/liujiao/katana/bin/libFnGeolibSDK.so)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /opt/liujiao/katana/bin/libFnGeolibSDK.so)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libQt5Widgets.so.5)
./katanaBin: /lib64/libQt5Core.so.5: version `Qt_5.15' not found (required by /opt/liujiao/katana/bin/libQt5Widgets.so.5)
./katanaBin: /lib64/libm.so.6: version `GLIBC_2.27' not found (required by /opt/liujiao/katana/bin/libQt5Gui.so.5)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libQt5Gui.so.5)
./katanaBin: /lib64/libQt5Core.so.5: version `Qt_5.15' not found (required by /opt/liujiao/katana/bin/libQt5Gui.so.5)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libfoundryboost_thread.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /opt/liujiao/katana/bin/libfoundryboost_thread.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libfoundryboost_chrono.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /opt/liujiao/katana/bin/libfoundryboost_chrono.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.8' not found (required by /opt/liujiao/katana/bin/libfoundryboost_atomic.so.1.80.0)
./katanaBin: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /opt/liujiao/katana/bin/libfoundryboost_atomic.so.1.80.0)
```

## /lib64/libstdc++.so.6: version `CXXABI_1.3.8' not found

It seems like the error message "/lib64/libstdc++.so.6: version `CXXABI_1.3.8'
not found" is related to a missing version of the C++ ABI library in your
system. This error can occur when a program or library compiled with a newer
version of GCC is run on a system with an older version of the C++ ABI
library."`"

查询自己的 ABI 版本

    strings /lib64/libstdc++.so.6 | grep CXXABI

查询系统上的libstdc++.so

    find / -name “libstdc++.so*”

    在 debian 上测试可以，则把 debian 上的 libstdc++.so.6 库复制到 centos7 上



## /lib64/libc.so.6: version `GLIBC_2.28' not found`



## 升级 gcc

升级前 GNU Make 3.82
安装版本 4.2

1. 首先升级 make

    wget http://ftp.gnu.org/gnu/make/make-4.2.tar.gz
    tar -xzvf make-4.2.tar.gz
    cd make-4.2
    sudo ./configure
    sudo make
    sudo make install
    sudo rm -rf /usr/bin/make
    sudo cp ./make /usr/bin/
    make -v

2. 升级 glibc

    yum install -y centos-release-scl
    yum list |grep devtoolset |grep gcc.x86_64
    yum install devtoolset-8-gcc*
        实际测试 9/10/11 都不幸，安装 glibc-2.28 时候提示 compiler too old

    $LD_LIBRARY_PATH:
    /mnt/work/software/muster_extra_so:/opt/rh/devtoolset-8/root/usr/lib64:/opt/rh/devtoolset-8/root/usr/lib:/opt/rh/devtoolset-8/root/usr/lib64/dyninst:/opt/rh/devtoolset-8/root/usr/lib/dyninst:/opt/rh/devtoolset-8/root/usr/lib64:/opt/rh/devtoolset-8/root/usr/lib:/mnt/work/software/muster_extra_so:


    LD_LIBRARY_PATH=''


    wget http://ftp.gnu.org/gnu/glibc/glibc-2.28.tar.gz
    #这里或者访问http://ftp.gnu.org/gnu/glibc/ 下载其他版本

    tar -zxvf glibc-2.28.tar.gz -C /usr/local/
    #官方推荐安装到/usr/local/目录下
    cd /usr/local/glibc-2.28

    mkdir build && cd build
    ../configure --prefix=/usr --disable-profile --enable-add-ons --with-headers=/usr/include --with-binutils=/usr/bin
    make && make install
    #make过程会比较长，根据服务器性能不同而不同，我在虚拟机里面是编译了将近半小时。
    strings /lib64/libc.so.6|grep ^GLIBC
    ls -l /lib64/libc.so.6
    #检查下libc.so.6是否为2.28版本

    ``` 2.37
    ../configure --prefix=/usr --disable-profile --enable-add-ons --with-headers=/usr/include --with-binutils=/usr/bin
    checking build system type... x86_64-pc-linux-gnu
    checking host system type... x86_64-pc-linux-gnu
    checking for gcc... gcc
    checking for suffix of object files... o
    checking whether we are using the GNU C compiler... yes
    checking whether gcc accepts -g... yes
    checking for g++... g++
    checking whether we are using the GNU C++ compiler... yes
    checking whether g++ accepts -g... yes
    checking whether g++ can link programs... no
    checking for sysdeps preconfigure fragments... aarch64 alpha arc arm csky hppa i386 loongarch m68k microblaze checking for grep that handles long lines and -e... /usr/bin/grep
    checking for egrep... /usr/bin/grep -E
    mips nios2 or1k powerpc riscv s390 sh checking for grep that handles long lines and -e... (cached) /usr/bin/grep
    checking for egrep... (cached) /usr/bin/grep -E
    sparc x86_64 checking whether gcc compiles in -mx32 mode by default... no

    checking for a BSD-compatible install... /usr/bin/install -c
    checking whether ln -s works... yes
    checking for /usr/bin/ld... /usr/bin/ld
    checking version of /usr/bin/ld... 2.27, ok
    checking for gnumake... no                                          <---
    checking for gmake... gmake
    checking version of gmake... 4.2, ok
    checking for gnumsgfmt... no                                            <---
    checking for gmsgfmt... no
    checking for msgfmt... msgfmt
    checking version of msgfmt... 0.19.8.1, ok
    checking for makeinfo... no                                             <---
    checking for sed... sed
    checking version of sed... 4.2.2, ok
    checking for gawk... gawk
    checking version of gawk... 4.0.2, ok
    checking for bison... bison
    checking version of bison... 3.0.4, ok
    checking if gcc -B/usr/bin/ is sufficient to build libc... no                                           <---
    checking for python3... python3
    checking version of python3... 3.6.8, ok
    configure: error:
    *** These critical programs are missing or too old: compiler                                            <---
    *** Check the INSTALL file for required versions.

    ```
