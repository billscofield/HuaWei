# Blender

## 常见软件

游戏
    3Dmax, maya, blender, Cinema4D, zbrush

工业
    proe, solidworks, inventor, ug

建筑设计
    sketchup, rhino, revit

CG
    不精确建模

## blender

小巧，开源，全流程

使用方式:
    - 建立模型，导出到游戏引擎
    - 全流程制作，生成CG短片作品

 [斑斓中国](blendercn.org)

 ## 流程

layout         布局
modeling       建模
sculpting      / skʌlpt /雕刻
UV Editing     UV展开
Texture Paint  / ˈtekstʃər /质地，纹理
Shading        着色器
Animation
Rendering
Compositing    合成


### uv

[link](https://www.zdaiot.com/ImageProcessing/UV%E7%9A%84%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BD%9C%E7%94%A8/)

“UV”是纹理贴图坐标的简称。它定义了图片上每个点的位置的信息。这些点与3D模型是相
互联系的，以决定表面纹理贴图的位置。就好像平面的布料，剪裁制作成立体的衣服一样。
UV就是将图像上每一个点精确对应到模型物体的表面。在点与点之间的间隙位置由软件进
行图像光滑插值处理。这就是所谓的UV贴图。

对于三维模型，有两个最重要的坐标系统，一是顶点的位置（X，Y，Z）坐标，另一个就是
UV坐标。

模型是立体的，坐标系遵循 XYZ。要贴上去的图片是平面的，遵循的坐标为UV（还有W，深
度意思）。如何把平面的二维（UV）图片的每一个点与三维的模型（XYZ）的每一个点一一
对应，这个中间就需要UV坐标来控制。

2D到3D的对应方法，我们就说“贴图映射”，也就是3d模型在平面贴图上的投影。

另外，由于三维物体表面有大有小是变化的，这意味着我们要不断更新纹理坐标。但是这
在现实中很难做到。于是设定了纹理坐标空间，每维的纹理坐标范围都在[0,1]中，利用纹
理坐标乘以纹理的高度或宽度就可以得到顶点在纹理上对应的纹理单元位置。

**纹理空间又叫UV空间**。对于顶点来说，纹理坐标相对位置不变。


## 

大纲窗口
属性窗口
状态栏
时间轴

上下文菜单
上下文工具

视图工具

Z轴向上

红x 绿y 蓝z

游标Cursor  世界的中心, 默认(0,0,0)
    用来进行物体的定位

    物体的出生点

    在游标处会和： 右键 / 吸附 | 选中项 游标

    选择物体 / 右键 / 吸附 / 游标->选中项

    右上角 可以隐藏 Cursor(3D游标)

    shift + c  恢复 3D游标 到世界坐标系的原点。
    shift + S 可以设置3D游标到所需要的位置

自动吸附

    勾选磁铁 / 吸附至(顶点，边...) / 
    选中游标工具，拖动到想要吸附到的点

**变换轴心点(质心点)**
    上下文工具 > 物体 > 设置原点 > "原点->3D游标"

x   东西
y   南北
z   上下


快捷键的修改

    编辑 / 偏好设置 / 键位映射 / 3D视图

编辑/ 偏好设置 / 视图切换 / **围绕选择物体旋转**


4视图

    透视图      ctrl z
    四格视图    Ctrl Alt Q

    顶视图      7(必须是小键盘的7)
    正视图      1
    右视图      3

右侧
    物体类型可见性

    视图 Gizmo

    视图叠加层

    切换透视模式

    视图着色方式


启用主键盘的数字键
    编辑 / 偏好设置 / 输入 / 键盘 / 模拟数字键

默认一个格子是1m


shift alt z         layout 工作流中显示/隐藏世界栅格



移动 shift space g

    选中哪个颜色的方块进行移动，就是锁定那个坐标轴, 颜色块应该是取反的意思

    白色圆圈是自由移动

    n 侧面板(sidebar)显示物体的世界位置, 变换，缩放，尺寸, 也可以从属性窗口设定

    !!!: 选中物体 alt g

微调(adjast last operation)
    移动物体后，会在左下角出现一个弹出菜单，显示的是刚才的移动， 可以进行精确修改

    添加物体的时候，也会默认弹出


旋转 shift space r
    !!!选中物体 alt r

缩放 shift space s
    !!!选中物体 alt s


归零
    alt g    位移归零
    alt r    旋转归零
    alt s    缩放归零

    注意输入法


工具箱,物体的移动、旋转、缩放和变换
    1. 移动 shift space g
    2. 旋转 shift space r
    3. 缩放 shift space s
    4. 变换 shift space t (就是 移动控制器+旋转控制器+变换控制器)

    5. 框选 shfit space b          内部循环 w
    6. 游标 shift space space
    7. 添加立方体 shift space 9

    8. 标注 shift space 5          内部有标注橡皮擦
    9. 测量 shift space m

---


物体的边界显示

    !!!属性对话框 / 属性 / 视图显示 / 边界范围 / 勾选方框 (占据的空间的边界)

包围物体的线框

    !!!属性对话框 / 属性 / 视图显示 / 线框



物体重命名
    F2                  和下边的那个重命名不太一样, 这个好像是父级
    !!!大纲上右键重命名


删除
    delete  直接删除
    x       确认后删除


grap 抓取模式
    选中物体 g
    跟随鼠标

    g x         沿着x轴移动
    g y         沿着y轴移动
    g z         沿着z轴移动


复制物体

    ctrl c v    原位复制
    shift d     复制物体并进入 grab 模式, 然后按 x / y / z ， 沿x/y/z轴移动
        duplicate


原点Origin 物体的基准点 物体移动，旋转，缩放

    使用吸附工具定位 Cursor 到物体的具体位置,
    选择物体 / 右键 / 定位原点 / 原点->3D游标
    !!! Cursor  move mlb , 

定位游标新位置
    shift RMB

右键/设置原点

Tab
    物体模式
    编辑模式

编辑模型

    通过点(1)、线(2)、面(3)操作来修改其形状

    选中物体
    按 Tab 进入编辑模式
    电线面操作
    按 Tab 退出编辑模式

    左上角有选择模式，选择点/线/面


一般用三角形四边形

三维模型是中空的

顶点 Vertex
边线 edge
面 face


选择
    调整
    框选
        shift space b
        内部循环 w
    刷选 / 半径
    套索

    shift 加选, 新版本应该是变了，shift是toggle, 加选减选都可以
    ctrl  减选
    a     全选


面操作
    subdivide 细分
        选择面 / 右键 / 细分 / 微调

        实质是对边的细分 

        不一定是4边形了, 然后就不能细分了

        一般是对四边形进行细分

        只能是四边形???

    删除面
        x

    挤出选区 extrude
        shift space e

    挤出流形
        shift space e

        e

        向内部挤压, 边面会删掉
        shift space shift 4
        打开面朝向可以更好地观察

    四边形 quad 4条边的

    内插面 inset
        shift space i

        也可以直接用 i

        在选中的面中内插一个面

        深度:可以选择"深度",是否突出，内凹

        选择外侧：可以选择“内嵌面”,回 的四个边面，默认是里边的那个口面

        各面：两个相邻的面的行为，是看作一个面还是各自的面

        上下文工具处，可以有外插的选择, 


    尖分面 poke faces

        从面的中心点，连接到每条边, 因该是该面的所有直接点

        添加了一个顶点

        右键 > 尖分面


    面三角化

        基于原来的顶点进行连接
        右键 > 面三角化(ctrl t)
        没有添加新的顶点，对角线连接

    融并面
        选择相邻的多个面, 右键 > 融并面
        会去掉这两个面相邻的边，仅保留外围的线

    面的手动切割
        knife   快捷键是 k
        中点 需要按住 ctrl, 新版本是 shift

        ctrl 是忽略吸附

        RMB 鼠标右键, 表示取消, 或者使用 esc

        工具箱中的那个软件首切点无法吸附

    整体切分
        shift space shift 8
        切西瓜，把一个物体分为两半
        **要先选择面**
        对整体进行加点
        清空内测: 箭头所指向的反方向
        清空外侧: 箭头所指向的方向
        填充: 切面是否填充面

    面的法向(normal)
        代表一个面的正面的朝向
        箭头方向是其朝向
        右上角的“视图叠加层”, 法向
        右上角下拉菜单, the last 可以开启显示法向

    面朝向
        右上角的 "视图叠加层" > "几何数据" > "面朝向"
        蓝色标示正面
        红色标示反面

        几何数据 / 面朝向

    背景剔除
        右上角最右边的下拉菜单 "视图着色方式" > 选项 > 背面剔除
        这样的话 + 面朝向 反面就透明了

    翻转法向
        选择面
        网格 / 法向(alt n) / 翻转

    填充面(f)
        选中一圈边线， 填充为面
        旧版本是填充三角面，现在是一个整面,之前的版本好像是填充三角面，但是3.0.1是一个面
        面 / 填充
        快捷键 F 键

    栅格填充(要求偶数边)
        上下文菜单中选择面 > 栅格填充
        内部会有很多边线, 新填充的都是四边形的面

    x-ray 透视
        鼠标可以穿透选择
        alt z

    **Cavity**
        视图着色方式 > Cavity > 两者
        会有层次效果，可以更好的观察物体

边
    细分 subdivide
        选中一条边，右键， 细分

    滑移
        上下文工具 > 边 > 滑移边线
        最好在导轨边线上移动鼠标进行滑移
        就像火车一样，沿着铁轨移动

    循环边（头尾相连的）
        alt 选择边
        添加 shift 多选

    并排的循环边
        ctrl alt 选择边
        添加 shift 多选

    删除
        x
            容并边：容并边，合并面, 并不删除这个面
                bpy.ops.mesh.dissolve_edges()
        del

    边的溶解(dissolve)
        不影响整体结构
        x / 融并边

    边线倒角
        shift space ctrl b
        ctrl b
        宽度: 倒角到原来的边线的距离
        段数: 倒角的细致程度
        形状： 凹小(0)or凸大(1)

        也可以对面进行倒角，即对每个边进行倒角

    环切 loop cut
        环切并滑移
        shift space ctrl r
        ctrl r
        上下文工具 > 边 > 环切并滑移(ctrl r)

        会有预览, 不需要先选择线
        别松手，还可以调位置, 平移
        默认是中点位置

        就是在面上方便的加线

    **偏移边线并滑移**
        需要线选择一条基准线
        上下文工具 > 边 > 偏移边线并滑移(shift ctrl r)
        bpy.ops.mesh.offset_edge_loops_slide()
        是复制出来两天线滑移

    循环边 loop edges, 首尾相连
        alt lmb

        一个作用：卡线

    并排边 ring edges
        ctrl alt lmb

    循环面
        ctrl alt lmb
        根据视角的不同进行不同的选择

    ?切变
        工具箱左下角

    法向缩放
        沿法向缩放


    四边形的优势
        环切，循环边，并排边 算法的选择

    桥接循环边
        bpy.ops.mesh.bridge_edge_loops()
        1. 选中两组循环边，边数要相同
        2. 菜单， 边 / 桥接循环边

        应用：墙体打洞

        **也可以选择两个相对的面，直接 边/桥接循环边**

    边的法向
        挤出等工具可以看
        相邻两个面的法向的夹角的平均值

        法向坐标系

    间隔式弃选
        选择 / 间隔式弃选

    挤出
        沿各个面挤出

点
    j 连接顶点路径, 边在面内, 会切割平面
        还可以对穿过的线加点

    f 这个边和面没有关系

    移动
        布线

    顶点滑移
        上下文工具 / 顶点 / 顶点滑移
        shift v

    右上角 视图叠加层 / 显示统计信息

        可以显示到状态栏
            编辑 / 偏好设置 / 界面 / 编辑器 / 状态栏 / 勾选 场景统计数据

    顶点合并(焊接)快捷键 m

        选中顶点 右键 合并顶点 /
            到中心
            到游标
            塌陷
            按距离

        两个叠在一起的顶点只能选择到上边的那个

        打开 x-ray 进行选择 合并到中心

        全选 / 合并定点 / 按距离

    自动合并顶点
        右上角 / 选项 左边那个， 或者选项下拉三角(有阈值)

    顶点倒角
        菜单栏 或者 工具箱

        可以结合 looptools 做出圆形

    衰减编辑 proportional edit
        拉扯顶点， 形变(拉力)沿边线传导、并衰减

        在中间上方

        选中面，点，边 g 形变，近的变得大，远的形变的小

    球形化
        立方体 细分 x-ray 选中一批顶点 工具箱左下角球形化


插件
    编辑 / 偏好设置 / 插件

    1. mesh extra object 提供更多基本形状
        1. round cube 圆角立方体

        2. torus 环形, 游泳圈

        3. Math Function 数学函数曲面 
        4. math function | regular solid 正多面体
        5. gear 齿轮
        6. pipe joint 管道接头
        7. diamond 钻石

    2. booltool 布尔工具

        选中物体 ， n / 编辑 /

        差集 difference: 先选择老鼠，后选择粮食




一个物体，进入编辑模式 全部删掉，但是这个物体还存在，如果是物体模式删除那这个物体就没有了

模型的合并

    选中多个物体 右键 / 合并

    或者快捷键 ctrl j

    橙红色      Selected
    橙黄色      Active      一般是最后一个物体
    合并的方向： selected -> active


拆分

    一个面，右键 / 拆分， 就是解除了焊接, 还是一个物体

分离

    一个面，右键 / 分离， 分成了两个物体


## 曲线 curve 样条线

贝塞尔曲线

    tab / 先选中控制柄 / 然后才可以选中控制点

    右键 / 转换到 / 曲线，网格, 蜡笔

    添加控制点

        1. 细分
            选择两端的控制点，右键，细分

        2. 挤出


    融并顶点

        选中定点 / x / 融并顶点

    控制柄类型
        选中 v 
            自动: 自动平滑
            矢量: 这边成为直线
            对其: 两个控制柄同步
            自由: 左右自由






NURBS曲线


import bpy      // blender python


vscode
    python
    blender python code template
    blender development

    fake-bpy-module         // bpy自动补全 下载解压
    ```
    {
        "python.autoComplete.extraPaths":
        [
            "/../fake_bpy_modules"
        ],
    ```
    }







### bpy

vscode
    blender Development 插件，ctrl shift p 打开 blender
