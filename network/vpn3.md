
## VPN的分类

### 基于技术
二层的
    裸光纤 帧中继 DDN

    L2TP
    MPLS
    PPTP(Microsoft私有)
    L2F(Cisco私有)


三层的
    GRE
        静态:
        逻辑
        点对点

        报文格式
            Delivery Header 公网
            GRE Header
            Payload packet 私网IP

    IPSEC
        动态
        点对点

应用层
    SSL


### 基于业务

远程拨号, 移动办公
Intranet VPN, 企业分支的互联
Extranet VPN, 提供B2B之间的安全访问服务, 客户，供应商


一种伪装技术，


隧道技术
身份认证
数据认证技术
加解密技术
秘钥管理技术



DSVPN  点对多点




## 加密技术

### 对称加密
加密、解密用同一个秘钥

#### 分组加密算法
DES(56bit)
3DES(56x3 bit)
AES(128/192/256 bit)
IDEA
RC2, RC5, RC6

国密sm4(华为设备有,但是需要付费)

特定长度的一块数据
DES     block size:56   



优点：
算法简单，速度快，适合大块的数据
密文紧凑:

IPSec 用的就是对称加密

缺点:
秘钥分发管理较为麻烦(考虑安全性)
安全性较低

#### 流加密算法
RC4





### 非对称加密
加密、解密用的是不同的个秘钥

RSA
D-H
SM3
ECC



私钥加密：提供身份认证/源认证

私钥签名(数字签名)， 公钥验证

数字信封：


优点:
    安全性高，速度慢
缺点:
    密文松散, 加密后内容变大
    无法抵御中间人攻击



大文件用对称加密，这个key 用非对称进行加密，互补


散列算法
SHA-1
MD5

hash之前的叫 原像, hash之后得到 hash值/散列值


指纹???

CA 机构

CA机构用CA的私钥对我们的公钥进行签名，我们用CA的公钥进行验证, 通过则说明这个是真实的网站，而不是中间人
CA的私钥就是根证书


1. 数字证书的主体
    持有者
    有效期
    序列号
    颁发者
    ...
1. 签名的算法
1. 签名


数字信封是指发送方使用接收方的公钥来加密对称密钥后所得的数据，其目的是用来确保对称密钥传输的安全性。采用数字信封时，接收方需要使用自己的私钥才能打开数字信封得到对称密钥。

甲使用对称密钥对明文进行加密，生成密文信息。

（2）甲使用乙的公钥加密对称密钥，生成数字信封。

（3）甲将数字信封和密文信息一起发送给乙。

（4）乙接收到甲的加密信息后，使用自己的私钥打开数字信封，得到对称密钥。

（5）乙使用对称密钥对密文信息进行解密，得到最初的明文。

    从以上加/解密过程中，可以看出，数字信封技术结合了对称密钥加密和公钥加密的优点，解决了对称密钥的发布安全问题，和公钥加密速度慢问题，提高了安全性、扩展性和效率等。但是，数字信封技术还是有一个比较大的问题，那就是无法确保信息是来自真正的对方。

    试想一下如果攻击者拦截甲发给乙的信息，用自己的对称密钥加密一份伪造的信息，并用乙的公钥（攻击者已获知了乙对外公开的公钥）加密攻击者自己的对称密钥，生成数字信封；然后把伪造的加密信息，以及伪造的数字信封一起发送给乙。乙收到加密信息后，用自己的私钥可以成功解密数字信封，再利用还原出的对称密钥（这个是攻击者的对称公钥）即可还原出加密的明文信息了，这样一来乙则始终认为这份本来是攻击者伪造的信息是甲发送的信息。这样的结局可能是损失惨重，如攻击者修改了甲发给乙的投标书的标的。

