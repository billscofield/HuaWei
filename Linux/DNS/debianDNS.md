### 安装

apt install bind9

### 配置文件

/etc/bind/named.conf
    ```
    include "/etc/bind/named.conf.options";

    include "/etc/bind/named.conf.local";
    include "/etc/bind/named.conf.default-zones";
    ```

    ```/etc/named.conf.options
    options {
        directory "/var/cache/bind";
        //forwarders {
        //  0.0.0.0;
        // 
        };

        dnssec-validation auto;
        listen-on-v6 { any;  };
    };
    ```
    debian 版本的 bind9 应该是默认监听了所有 IP



/etc/bind/named.conf.default-zones
    正向解析和反向解析
    ```
    zone "." {
        type hint;
        file "/usr/share/dns/root.hints";
    };

    zone "localhost" {
        type master;
        file "/etc/bind/db.local";
    };

    zone "127.in-addr.arpa" {
        type master;
        file "/etc/bind/db.127";
    };
    ```

    db.local , db.0 , db.empty

    ```db.empty
    ; BIND reverse data file for empty rfc1918 zone
    ;
    ; DO NOT EDIT THIS FILE - it is used for multiple zones.
    ; Instead, copy it, edit named.conf, and use that copy.
    ;
    $TTL    86400
    @   IN  SOA localhost. root.localhost. (
                     1     ; Serial
                604800     ; Refresh
                86400      ; Retry
                2419200    ; Expire
                86400 )    ; Negative Cache TTL
    ;
    @   IN  NS  localhost.
    ```
zones.rfc1918   私有地址反向解析文件

    zone "10.in-addr.arpa"  { type master; file "/etc/bind/db.empty";  };
    zone "16.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty";  };
    ...
    zone "31.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty";  };
    zone "168.192.in-addr.arpa"  { type master; file "/etc/bind/db.empty";  };



### db 解释

```
$TTL    604800
@   IN  SOA localhost. root.localhost. (
                 2    ; Serial
            604800    ; Refresh
             86400    ; Retry
           2419200    ; Expire
            604800 )  ; Negative Cache TTL
;
@   IN  NS  localhost.
@   IN  A   127.0.0.1
@   IN  AAAA    ::1

```



### 补充

The listen-on option specifies IPv4 address to listen on. 
There is no interface specific option but IP is assigned to specific interface, so by specific IP you can force BIND to listen on certain IP or network interface.

/etc/bind/named/named.conf.options
To listen on all interfaces and IP (default)

    listen-on { any; };

IPv6 option is as follows:

    listen-on-v6 { any; };
    listen-on-v6 { ipv-6-address; };



1. 重启服务

to restart the bind server on a CentOS/RHEL 7.x:
    - systemctl restart named

on a CentOS/RHEL 6.x or older:
    - service bind restart

on a Ubuntu/Debian Linux server:
    - service bind9 restart

OR
    - /etc/init.d/bind9 restart


named-checkconf
named-checkzone
